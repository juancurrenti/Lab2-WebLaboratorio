html
  head
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet")
    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js")
    link(rel="icon" href="/public/img/icon.png" type="image/png")
    link(rel="stylesheet" href='/public/css/style.css')
    script(src='https://code.jquery.com/jquery-3.6.0.min.js')
    script(src='https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js' crossorigin='anonymous')
    link(href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet")
    style.
      body {
        font-family: 'Roboto', sans-serif;
        background-color: #f8f9fa;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }
      .navbar {
        background-color: #343a40;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      .dropdown-menu {
        z-index: 2000 !important;
      }
      .navbar-brand {
        color: white;
        font-size: 1.5rem;
        font-weight: bold;
        display: flex;
        align-items: center;
      }
      .navbar-brand img {
        width: 30px;
        height: 30px;
        margin-right: 10px;
      }
      .main-content {
        padding: 20px;
        flex: 1;
        margin-top: 90px; 
      }
      .user-info img {
        width: 150px;
        height: 150px;
        border: 2px solid #adb5bd;
      }
      .btn-dark {
        transition: all 0.3s ease;
        border: 2px solid transparent;
      }
      .btn-dark:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }
      .btn-outline-danger:hover {
        background-color: #dc3545;
        color: white !important;
      }
      .section-title {
        color: #6c757d;
        font-weight: 500;
        border-bottom: 2px solid #dee2e6;
        padding-bottom: 0.5rem;
        margin: 2rem 0 1.5rem;
      }

  body
    //- Navbar superior
    nav.navbar.navbar-dark.fixed-top(style="height: 90px") 
      .container-fluid
        .mx-auto.text-white.text-center
          h3.m-0(style="padding-left: 120px;") Área #{rol}
        a.navbar-brand(href="/redirigirUsuario")
          img(src="/public/img/icon.png" alt="Logo")
          | Inicio 

block content

    .main-content.container
      //- Información de usuario
      .user-info.text-center.mb-5
        if urlFoto
          img.rounded-circle.mb-3(src=urlFoto alt="Foto de usuario")
        else
          img.rounded-circle.mb-3(src="/public/img/default-avatar.png" alt="Foto predeterminada")
        h2 #{nombreUsuario}

      //- --- Flujo de Trabajo (5 pasos) ---
      h4.section-title Flujo de Trabajo
      .row.g-3.mb-4
        // 1 → Registrar/Buscar Paciente
        if rol === "recepcionista" || rol === "tecnico" || rol === "bioquimico" || rol === "admin"
          .col-md-3.col-sm-6
            a.btn.btn-dark.btn-lg.w-100(href="/buscar-paciente")
              i.fas.fa-user-plus.me-2
              | Registrar/Buscar

        // 2 → Generar Orden de Trabajo
        if rol === "recepcionista" || rol === "tecnico" || rol === "bioquimico"
          .col-md-3.col-sm-6
            a.btn.btn-dark.btn-lg.w-100(href="/orden/generacion-orden")
              i.fas.fa-file-alt.me-2
              | Generar Orden

        // 3 → Analizar / Registrar Resultados
        if rol === "bioquimico" || rol === "tecnico"
          .col-md-3.col-sm-6
            a.btn.btn-dark.btn-lg.w-100(href="/ordenesAnalitica")
              i.fas.fa-vials.me-2
              | Analizar Resultados

        // 4 → Validar Resultados
        if rol === "bioquimico"
          .col-md-3.col-sm-6
            a.btn.btn-dark.btn-lg.w-100(href="/pendientesAValidar")
              i.fas.fa-tasks.me-2
              | Validar Resultados

        // 5 → Ver Informadas
        if rol === "bioquimico" || rol === "tecnico"
          .col-md-3.col-sm-6
            a.btn.btn-dark.btn-lg.w-100(href="/ordenesInformadas")
              i.fas.fa-eye.me-2
              | Ver Informadas

      //- --- Resto de secciones según rol ---
      if rol === "bioquimico" || rol === "tecnico"
        h4.section-title Exámenes
        .row.g-3.mb-4
          .col-md-3.col-sm-6
            a.btn.btn-dark.btn-lg.w-100(href="/examen/crear-examen")
              i.fas.fa-notes-medical.me-2
              | Generar
          .col-md-3.col-sm-6
            a.btn.btn-dark.btn-lg.w-100(href="/modificar-examen/buscar-modificar-examen")
              i.fas.fa-pencil-alt.me-2
              | Actualizar
          .col-md-3.col-sm-6
            a.btn.btn-dark.btn-lg.w-100(href="/examen/listado-examenes")
              i.fas.fa-list-ul.me-2
              | Listado de Exámenes Disponibles

      if rol === "bioquimico" || rol === "tecnico"
        h4.section-title Determinaciones
        .row.g-3.mb-4
          .col-md-3.col-sm-6
            a.btn.btn-dark.btn-lg.w-100(href="/determinacion/crear-determinacion")
              i.fas.fa-list.me-2
              | Administrar

      if rol === "bioquimico" || rol === "tecnico"
        h4.section-title Valores Referencia
        .row.g-3.mb-4
          .col-md-3.col-sm-6
            a.btn.btn-dark.btn-lg.w-100(href="/valoresreferencia/crear-valores")
              i.fas.fa-balance-scale.me-2
              | Administrar

      if rol === "admin"
        h4.section-title Administración
        .row.g-3.mb-4
          .col-md-3.col-sm-6
            a.btn.btn-dark.btn-lg.w-100(href="/admin/crear-usuario")
              i.fas.fa-user-plus.me-2
              | Crear Usuario
          .col-md-3.col-sm-6
            a.btn.btn-dark.btn-lg.w-100(href="/admin/actualizarUsuarioAdm")
              i.fas.fa-user-edit.me-2
              | Actualizar
          .col-md-3.col-sm-6
            a.btn.btn-dark.btn-lg.w-100(href="/admin/auditoria")
              i.fas.fa-book.me-2
              | Auditoría
      
      //- Configuración siempre visible
      .config-section.mt-5
        hr
        .row.g-3.justify-content-center
          .col-md-3.col-sm-6
            a.btn.btn-outline-dark.btn-lg.w-100(href="/cambiarContrasena")
              i.fas.fa-key.me-2
              | Contraseña
          .col-md-3.col-sm-6
            a#logoutLink.btn.btn-outline-danger.btn-lg.w-100(
              href="#",
              data-bs-toggle="modal",
              data-bs-target="#logoutModal"
            )
              i.fas.fa-sign-out-alt.me-2
              | Salir

      //- Modal de logout
      .modal.fade#logoutModal(tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true")
        .modal-dialog
          .modal-content
            .modal-header
              h5#logoutModalLabel.modal-title Confirmar Cierre de Sesión
              button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
            .modal-body
              p ¿Estás seguro de que deseas cerrar sesión?
            .modal-footer
              button.btn.btn-secondary(type="button" data-bs-dismiss="modal") Cancelar
              a.btn.btn-danger(href="/logout") Confirmar
