extends layout

block content
  .container.mt-5
    h2.mb-4 Editar mis datos

    // Mostrar mensajes de éxito si existen
    if successMessages && successMessages.length > 0
      each msg in successMessages
        .alert.alert-success= msg

    // Mostrar mensajes de error si existen
    if errorMessages && errorMessages.length > 0
      each msg in errorMessages
        .alert.alert-danger= msg
    
    form(method="POST" action="/portal-paciente/actualizar")
      .row
        .col-md-6.mb-3
          label.form-label Nombre
          input.form-control(
            type="text"
            name="nombre"
            value=paciente.nombre
            required
          )
        
        .col-md-6.mb-3
          label.form-label Apellido
          input.form-control(
            type="text"
            name="apellido"
            value=paciente.apellido
            required
          )
      
      .mb-3
        label.form-label Fecha de Nacimiento
        - const fecha = paciente.fecha_nacimiento ? new Date(paciente.fecha_nacimiento) : new Date();
        input.form-control(
          type="date"
          name="fecha_nacimiento"
          value=fecha.toISOString().split('T')[0]
          required
        )

      // Nuevo campo para Domicilio
      .mb-3
        label.form-label Domicilio
        input.form-control(
          type="text"
          name="direccion"
          value=paciente.direccion
          required
        )
      
      .card.mb-4
        .card-body
          h5.card-title Cambiar Contraseña
          .mb-3
            label.form-label Contraseña Actual
            input.form-control(
              type="password"
              name="password_actual"
              placeholder="Ingrese para cambiar contraseña"
            )
          .mb-3
            label.form-label Nueva Contraseña
            input.form-control(
              type="password"
              name="nueva_password"
              placeholder="Dejar vacío para mantener actual"
            )
      
      button.btn.btn-primary(type="submit") Guardar Cambios
      a.btn.btn-secondary.ms-2(href="/portalPaciente") Volver 
