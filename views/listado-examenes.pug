extends layout

block content

  .container-fluid
    h1.mt-4 Listado de Ex치menes Disponibles

    .form-group.mt-3
      label(for="search_examen") Buscar Examen:
      input#search_examen(type="text" class="form-control" placeholder="Escribe para buscar por nombre o c칩digo..." autocomplete="off")

    table.table.table-striped.mt-4
      thead
        tr
          th C칩digo
          th Nombre del Examen
          th Descripci칩n
      tbody#examsTable

  script.

    const exams = !{JSON.stringify(exams)};

    const searchInput = document.getElementById("search_examen");
    const examsTable = document.getElementById("examsTable");

    function renderExams(filteredExams) {
      examsTable.innerHTML = "";
      filteredExams.forEach(exam => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${exam.codigo || ''}</td>
          <td>${exam.nombre_examen}</td>
          <td>${exam.descripcion || ''}</td>
        `;
        examsTable.appendChild(tr);
      });
    }


    renderExams(exams);


    searchInput.addEventListener("input", () => {
      const searchTerm = searchInput.value.toLowerCase();
      const filteredExams = exams.filter(exam => {
        return (exam.nombre_examen && exam.nombre_examen.toLowerCase().includes(searchTerm)) ||
               (exam.codigo && exam.codigo.toLowerCase().includes(searchTerm));
      });
      renderExams(filteredExams);
    });